{
  "entityType" : "RULE_CHAIN",
  "entity" : {
    "additionalInfo" : {
      "description" : ""
    },
    "configuration" : null,
    "debugMode" : false,
    "externalId" : null,
    "firstRuleNodeId" : {
      "entityType" : "RULE_NODE",
      "id" : "bcd40b20-ca33-11ee-a1af-a7e67e72b29c"
    },
    "id" : {
      "entityType" : "RULE_CHAIN",
      "id" : "bc7fa990-ca33-11ee-a09b-6fe9f38618ff"
    },
    "name" : "Data Simulators",
    "root" : false,
    "type" : "CORE"
  },
  "metaData" : {
    "connections" : [ {
      "fromIndex" : 0,
      "toIndex" : 3,
      "type" : "Success"
    }, {
      "fromIndex" : 1,
      "toIndex" : 4,
      "type" : "Success"
    }, {
      "fromIndex" : 2,
      "toIndex" : 5,
      "type" : "Success"
    }, {
      "fromIndex" : 3,
      "toIndex" : 6,
      "type" : "Success"
    }, {
      "fromIndex" : 4,
      "toIndex" : 7,
      "type" : "Success"
    }, {
      "fromIndex" : 5,
      "toIndex" : 8,
      "type" : "Success"
    }, {
      "fromIndex" : 8,
      "toIndex" : 11,
      "type" : "True"
    } ],
    "firstNodeIndex" : 12,
    "nodes" : [ {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 54,
        "layoutY" : 245
      },
      "configuration" : {
        "msgCount" : 0,
        "periodInSeconds" : 60,
        "scriptLang" : "JS",
        "jsScript" : "var pp=getRandomNumber(1, 25);\nvar rp=getRandomNumber(1, 6);\nvar power=getRandomNumber(50,150);\n\nvar msg = { producedParts: pp, rejectedParts: rp,powerUsage: power };\nvar metadata = { };\nvar msgType = \"POST_TELEMETRY_REQUEST\";\n\nfunction getRandomNumber(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nreturn { msg: msg, metadata: metadata, msgType: msgType };",
        "tbelScript" : "var pp=getRandomNumber(1, 25);\nvar rp=getRandomNumber(1, 20);\nvar power=getRandomNumber(50,500);\n\nvar msg = { producedParts: pp, rejectedParts: rp,powerUsageWh: power };\nvar metadata = { };\nvar msgType = \"POST_TELEMETRY_REQUEST\";\n\nfunction getRandomNumber(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nreturn { msg: msg, metadata: metadata, msgType: msgType };",
        "queueName" : null,
        "originatorId" : "b6105010-c9b5-11ee-a0e0-15431c20b1f9",
        "originatorType" : "DEVICE"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "bccb0a70-ca33-11ee-a1af-a7e67e72b29c"
      },
      "name" : "Generator Line A",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.debug.TbMsgGeneratorNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 57,
        "layoutY" : 333
      },
      "configuration" : {
        "msgCount" : 0,
        "periodInSeconds" : 60,
        "scriptLang" : "TBEL",
        "jsScript" : "var msg = { temp: 42, humidity: 77 };\nvar metadata = { data: 40 };\nvar msgType = \"POST_TELEMETRY_REQUEST\";\n\nreturn { msg: msg, metadata: metadata, msgType: msgType };",
        "tbelScript" : "var pp=getRandomNumber(1, 25);\nvar rp=getRandomNumber(1, 6);\nvar power=getRandomNumber(50,150);\n\nvar msg = { producedParts: pp, rejectedParts: rp,powerUsage: power };\nvar metadata = { };\nvar msgType = \"POST_TELEMETRY_REQUEST\";\n\nfunction getRandomNumber(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nreturn { msg: msg, metadata: metadata, msgType: msgType };",
        "queueName" : null,
        "originatorId" : "bc48b850-c9b5-11ee-a09b-6fe9f38618ff",
        "originatorType" : "DEVICE"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "bccc6a00-ca33-11ee-a1af-a7e67e72b29c"
      },
      "name" : "Generator Line B",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.debug.TbMsgGeneratorNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 58,
        "layoutY" : 424
      },
      "configuration" : {
        "msgCount" : 0,
        "periodInSeconds" : 60,
        "scriptLang" : "JS",
        "jsScript" : "var pp=getRandomNumber(1, 25);\nvar rp=getRandomNumber(1, 6);\nvar power=getRandomNumber(50,150);\n\nvar msg = { producedParts: pp, rejectedParts: rp,powerUsage: power };\nvar metadata = { };\nvar msgType = \"POST_TELEMETRY_REQUEST\";\n\nfunction getRandomNumber(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nreturn { msg: msg, metadata: metadata, msgType: msgType };",
        "tbelScript" : "var pp=getRandomNumber(1, 25);\nvar rp=getRandomNumber(1, 20);\nvar power=getRandomNumber(50,500);\n\nvar msg = { producedParts: pp, rejectedParts: rp,powerUsageWh: power };\nvar metadata = { };\nvar msgType = \"POST_TELEMETRY_REQUEST\";\n\nfunction getRandomNumber(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nreturn { msg: msg, metadata: metadata, msgType: msgType };",
        "queueName" : null,
        "originatorId" : "c38f3530-c9b5-11ee-a1af-a7e67e72b29c",
        "originatorType" : "DEVICE"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "bccd5460-ca33-11ee-a1af-a7e67e72b29c"
      },
      "name" : "Generator Line C",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.debug.TbMsgGeneratorNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 322,
        "layoutY" : 244
      },
      "configuration" : {
        "tellFailureIfAbsent" : true,
        "fetchTo" : "METADATA",
        "clientAttributeNames" : [ ],
        "sharedAttributeNames" : [ ],
        "serverAttributeNames" : [ ],
        "latestTsKeyNames" : [ "status" ],
        "getLatestValueWithTs" : false
      },
      "configurationVersion" : 1,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "bcce3ec0-ca33-11ee-a1af-a7e67e72b29c"
      },
      "name" : "Save to metadata",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.TbGetAttributesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 335,
        "layoutY" : 332
      },
      "configuration" : {
        "tellFailureIfAbsent" : true,
        "fetchTo" : "METADATA",
        "clientAttributeNames" : [ ],
        "sharedAttributeNames" : [ ],
        "serverAttributeNames" : [ ],
        "latestTsKeyNames" : [ "status" ],
        "getLatestValueWithTs" : false
      },
      "configurationVersion" : 1,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "bccf0210-ca33-11ee-a1af-a7e67e72b29c"
      },
      "name" : "Save to metadata",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.TbGetAttributesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 344,
        "layoutY" : 440
      },
      "configuration" : {
        "tellFailureIfAbsent" : false,
        "fetchTo" : "METADATA",
        "clientAttributeNames" : [ ],
        "latestTsKeyNames" : [ "status" ],
        "serverAttributeNames" : [ ],
        "sharedAttributeNames" : [ ],
        "getLatestValueWithTs" : false
      },
      "configurationVersion" : 1,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "bccf9e50-ca33-11ee-a1af-a7e67e72b29c"
      },
      "name" : "Save to metadata",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.metadata.TbGetAttributesNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 618,
        "layoutY" : 241
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "return metadata.status == \"running\";",
        "tbelScript" : "return metadata.status == \"running\";"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "bcd03a90-ca33-11ee-a1af-a7e67e72b29c"
      },
      "name" : "Script Filter",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.filter.TbJsFilterNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 607,
        "layoutY" : 324
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "return metadata.status == \"running\";",
        "tbelScript" : "return metadata.status == \"running\";"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "bcd0fde0-ca33-11ee-a1af-a7e67e72b29c"
      },
      "name" : "Script Filter",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.filter.TbJsFilterNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 625,
        "layoutY" : 426
      },
      "configuration" : {
        "scriptLang" : "JS",
        "jsScript" : "return metadata.status == \"running\";",
        "tbelScript" : "return metadata.status == \"running\";"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "bcd19a20-ca33-11ee-a1af-a7e67e72b29c"
      },
      "name" : "Script Filter",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.filter.TbJsFilterNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 886,
        "layoutY" : 242
      },
      "configuration" : {
        "ruleChainId" : "7d49a700-c40a-11ee-a0e0-15431c20b1f9"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "bcd23660-ca33-11ee-a1af-a7e67e72b29c"
      },
      "name" : "Root rule chain",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.flow.TbRuleChainInputNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 913,
        "layoutY" : 335
      },
      "configuration" : {
        "ruleChainId" : "7d49a700-c40a-11ee-a0e0-15431c20b1f9"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "bcd2d2a0-ca33-11ee-a1af-a7e67e72b29c"
      },
      "name" : "Root rule chain",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.flow.TbRuleChainInputNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 913,
        "layoutY" : 423
      },
      "configuration" : {
        "ruleChainId" : "0cc53b60-c9b5-11ee-a09b-6fe9f38618ff"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "bcd36ee0-ca33-11ee-a1af-a7e67e72b29c"
      },
      "name" : "Root rule chain",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.flow.TbRuleChainInputNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 326,
        "layoutY" : 152
      },
      "configuration" : {
        "ruleChainId" : "0cc53b60-c9b5-11ee-a09b-6fe9f38618ff"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "bcd40b20-ca33-11ee-a1af-a7e67e72b29c"
      },
      "name" : "Root rule chain",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.flow.TbRuleChainInputNode"
    }, {
      "additionalInfo" : {
        "description" : "",
        "layoutX" : 632,
        "layoutY" : 568
      },
      "configuration" : {
        "scriptLang" : "TBEL",
        "jsScript" : "return {msg: msg, metadata: metadata, msgType: msgType};",
        "tbelScript" : "if(msg.powerUsage >= 100 || msg.producedParts < 5 || msg.rejectedParts >= 5){\n    msg.alarmCount = metadata.alarmCount + 1;\n}\nelse{\n    msg.alarmCount = metadata.alarmCount;\n}\nreturn {msg: msg, metadata: metadata, msgType: msgType};"
      },
      "configurationVersion" : 0,
      "createdTime" : 0,
      "debugMode" : true,
      "externalId" : null,
      "id" : {
        "entityType" : "RULE_NODE",
        "id" : "bcd48050-ca33-11ee-a1af-a7e67e72b29c"
      },
      "name" : "count total alarms",
      "ruleChainId" : null,
      "singletonMode" : false,
      "type" : "org.thingsboard.rule.engine.transform.TbTransformMsgNode"
    } ],
    "ruleChainConnections" : null
  },
  "relations" : [ ],
  "attributes" : {
    "SERVER_SCOPE" : [ ]
  }
}